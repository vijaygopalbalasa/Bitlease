"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_reown_appkit-controllers_dist_esm_exports_features_js"],{

/***/ "(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/exports/features.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@reown/appkit-controllers/dist/esm/exports/features.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReownAuthentication: function() { return /* reexport safe */ _src_features_reown_authentication_index_js__WEBPACK_IMPORTED_MODULE_0__.ReownAuthentication; },\n/* harmony export */   ReownAuthenticationMessenger: function() { return /* reexport safe */ _src_features_reown_authentication_index_js__WEBPACK_IMPORTED_MODULE_0__.ReownAuthenticationMessenger; }\n/* harmony export */ });\n/* harmony import */ var _src_features_reown_authentication_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../src/features/reown-authentication/index.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/index.js\");\n\n//# sourceMappingURL=features.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL2V4cG9ydHMvZmVhdHVyZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThEO0FBQzlEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL2V4cG9ydHMvZmVhdHVyZXMuanM/NmM4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9zcmMvZmVhdHVyZXMvcmVvd24tYXV0aGVudGljYXRpb24vaW5kZXguanMnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmVhdHVyZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/exports/features.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/ReownAuthentication.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/ReownAuthentication.js ***!
  \******************************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReownAuthentication: function() { return /* binding */ ReownAuthentication; }\n/* harmony export */ });\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reown/appkit-common */ \"(app-pages-browser)/./node_modules/@reown/appkit-common/dist/esm/src/utils/SafeLocalStorage.js\");\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @reown/appkit-common */ \"(app-pages-browser)/./node_modules/@reown/appkit-common/dist/esm/src/utils/ConstantsUtil.js\");\n/* harmony import */ var _controllers_AccountController_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../controllers/AccountController.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/controllers/AccountController.js\");\n/* harmony import */ var _controllers_ApiController_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../controllers/ApiController.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ApiController.js\");\n/* harmony import */ var _controllers_BlockchainApiController_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../controllers/BlockchainApiController.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/controllers/BlockchainApiController.js\");\n/* harmony import */ var _controllers_ChainController_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../controllers/ChainController.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ChainController.js\");\n/* harmony import */ var _utils_ChainControllerUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/ChainControllerUtil.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/utils/ChainControllerUtil.js\");\n/* harmony import */ var _ReownAuthenticationMessenger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ReownAuthenticationMessenger.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/ReownAuthenticationMessenger.js\");\n//\n\n\n\n\n\n\n\n/**\n * This is the configuration for using SIWX with Reown Authentication service.\n * It allows you to authenticate and capture user sessions through the Cloud Dashboard.\n */\nclass ReownAuthentication {\n    constructor(params = {}) {\n        this.otpUuid = null;\n        this.listeners = {\n            sessionChanged: []\n        };\n        this.localAuthStorageKey =\n            params.localAuthStorageKey ||\n                _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorageKeys.SIWX_AUTH_TOKEN;\n        this.localNonceStorageKey =\n            params.localNonceStorageKey ||\n                _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorageKeys.SIWX_NONCE_TOKEN;\n        this.required = params.required ?? true;\n        this.messenger = new _ReownAuthenticationMessenger_js__WEBPACK_IMPORTED_MODULE_1__.ReownAuthenticationMessenger({\n            getNonce: this.getNonce.bind(this)\n        });\n    }\n    async createMessage(input) {\n        return this.messenger.createMessage(input);\n    }\n    async addSession(session) {\n        const response = await this.request({\n            method: 'POST',\n            key: 'authenticate',\n            body: {\n                data: session.data,\n                message: session.message,\n                signature: session.signature,\n                clientId: this.getClientId(),\n                walletInfo: this.getWalletInfo()\n            },\n            headers: ['nonce', 'otp']\n        });\n        this.setStorageToken(response.token, this.localAuthStorageKey);\n        this.emit('sessionChanged', session);\n        this.setAppKitAccountUser(jwtDecode(response.token));\n        this.otpUuid = null;\n    }\n    async getSessions(chainId, address) {\n        try {\n            if (!this.getStorageToken(this.localAuthStorageKey)) {\n                return [];\n            }\n            const account = await this.request({\n                method: 'GET',\n                key: 'me',\n                query: {},\n                headers: ['auth']\n            });\n            if (!account) {\n                return [];\n            }\n            const isSameAddress = account.address.toLowerCase() === address.toLowerCase();\n            const isSameNetwork = account.caip2Network === chainId;\n            if (!isSameAddress || !isSameNetwork) {\n                return [];\n            }\n            const session = {\n                data: {\n                    accountAddress: account.address,\n                    chainId: account.caip2Network\n                },\n                message: '',\n                signature: ''\n            };\n            this.emit('sessionChanged', session);\n            this.setAppKitAccountUser(account);\n            return [session];\n        }\n        catch {\n            return [];\n        }\n    }\n    async revokeSession(_chainId, _address) {\n        return Promise.resolve(this.clearStorageTokens());\n    }\n    async setSessions(sessions) {\n        if (sessions.length === 0) {\n            this.clearStorageTokens();\n        }\n        else {\n            const session = (sessions.find(s => s.data.chainId === (0,_utils_ChainControllerUtil_js__WEBPACK_IMPORTED_MODULE_2__.getActiveCaipNetwork)()?.caipNetworkId) || sessions[0]);\n            await this.addSession(session);\n        }\n    }\n    getRequired() {\n        return this.required;\n    }\n    async getSessionAccount() {\n        if (!this.getStorageToken(this.localAuthStorageKey)) {\n            throw new Error('Not authenticated');\n        }\n        return this.request({\n            method: 'GET',\n            key: 'me',\n            body: undefined,\n            query: {\n                includeAppKitAccount: true\n            },\n            headers: ['auth']\n        });\n    }\n    async setSessionAccountMetadata(metadata = null) {\n        if (!this.getStorageToken(this.localAuthStorageKey)) {\n            throw new Error('Not authenticated');\n        }\n        return this.request({\n            method: 'PUT',\n            key: 'account-metadata',\n            body: { metadata },\n            headers: ['auth']\n        });\n    }\n    on(event, callback) {\n        this.listeners[event].push(callback);\n        return () => {\n            this.listeners[event] = this.listeners[event].filter(cb => cb !== callback);\n        };\n    }\n    removeAllListeners() {\n        const keys = Object.keys(this.listeners);\n        keys.forEach(key => {\n            this.listeners[key] = [];\n        });\n    }\n    async requestEmailOtp({ email, account }) {\n        const otp = await this.request({\n            method: 'POST',\n            key: 'otp',\n            body: { email, account }\n        });\n        this.otpUuid = otp.uuid;\n        this.messenger.resources = [`email:${email}`];\n        return otp;\n    }\n    confirmEmailOtp({ code }) {\n        return this.request({\n            method: 'PUT',\n            key: 'otp',\n            body: { code },\n            headers: ['otp']\n        });\n    }\n    async request({ method, key, query, body, headers }) {\n        const { projectId, st, sv } = this.getSDKProperties();\n        const url = new URL(`${_reown_appkit_common__WEBPACK_IMPORTED_MODULE_3__.ConstantsUtil.W3M_API_URL}/auth/v1/${String(key)}`);\n        url.searchParams.set('projectId', projectId);\n        url.searchParams.set('st', st);\n        url.searchParams.set('sv', sv);\n        if (query) {\n            Object.entries(query).forEach(([queryKey, queryValue]) => url.searchParams.set(queryKey, String(queryValue)));\n        }\n        const response = await fetch(url, {\n            method,\n            body: body ? JSON.stringify(body) : undefined,\n            headers: Array.isArray(headers)\n                ? headers.reduce((acc, header) => {\n                    switch (header) {\n                        case 'nonce':\n                            acc['x-nonce-jwt'] = `Bearer ${this.getStorageToken(this.localNonceStorageKey)}`;\n                            break;\n                        case 'auth':\n                            acc['Authorization'] = `Bearer ${this.getStorageToken(this.localAuthStorageKey)}`;\n                            break;\n                        case 'otp':\n                            if (this.otpUuid) {\n                                acc['x-otp'] = this.otpUuid;\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                    return acc;\n                }, {})\n                : undefined\n        });\n        if (!response.ok) {\n            throw new Error(await response.text());\n        }\n        if (response.headers.get('content-type')?.includes('application/json')) {\n            return response.json();\n        }\n        return null;\n    }\n    getStorageToken(key) {\n        return _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorage.getItem(key);\n    }\n    setStorageToken(token, key) {\n        _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorage.setItem(key, token);\n    }\n    clearStorageTokens() {\n        this.otpUuid = null;\n        _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorage.removeItem(this.localAuthStorageKey);\n        _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorage.removeItem(this.localNonceStorageKey);\n        this.emit('sessionChanged', undefined);\n    }\n    async getNonce() {\n        const { nonce, token } = await this.request({\n            method: 'GET',\n            key: 'nonce'\n        });\n        this.setStorageToken(token, this.localNonceStorageKey);\n        return nonce;\n    }\n    getClientId() {\n        return _controllers_BlockchainApiController_js__WEBPACK_IMPORTED_MODULE_4__.BlockchainApiController.state.clientId;\n    }\n    getWalletInfo() {\n        const { connectedWalletInfo } = _controllers_AccountController_js__WEBPACK_IMPORTED_MODULE_5__.AccountController.state;\n        if (!connectedWalletInfo) {\n            return undefined;\n        }\n        if ('social' in connectedWalletInfo) {\n            const social = connectedWalletInfo['social'];\n            const identifier = connectedWalletInfo['identifier'];\n            return { type: 'social', social, identifier };\n        }\n        const { name, icon } = connectedWalletInfo;\n        let type = 'unknown';\n        switch (connectedWalletInfo['type']) {\n            case 'EXTERNAL':\n            case 'INJECTED':\n            case 'ANNOUNCED':\n                type = 'extension';\n                break;\n            case 'WALLET_CONNECT':\n                type = 'walletconnect';\n                break;\n            default:\n                type = 'unknown';\n        }\n        return {\n            type,\n            name,\n            icon\n        };\n    }\n    getSDKProperties() {\n        return _controllers_ApiController_js__WEBPACK_IMPORTED_MODULE_6__.ApiController._getSdkProperties();\n    }\n    emit(event, data) {\n        this.listeners[event].forEach(listener => listener(data));\n    }\n    setAppKitAccountUser(session) {\n        const { email } = session;\n        if (email) {\n            Object.values(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_3__.ConstantsUtil.CHAIN).forEach(chainNamespace => {\n                _controllers_ChainController_js__WEBPACK_IMPORTED_MODULE_7__.ChainController.setAccountProp('user', { email }, chainNamespace);\n            });\n        }\n    }\n}\n/**\n * Decodes a JWT token and returns its payload\n * @param token - The JWT token to decode\n * @returns The decoded payload or null if invalid\n */\nfunction jwtDecode(token) {\n    // Split the token into parts\n    const parts = token.split('.');\n    // Check if the token has the correct format (header.payload.signature)\n    if (parts.length !== 3) {\n        throw new Error('Invalid token');\n    }\n    // Decode the payload (second part)\n    const payload = parts[1];\n    if (typeof payload !== 'string') {\n        throw new Error('Invalid token');\n    }\n    // Convert base64url to base64\n    const base64 = payload.replace(/-/gu, '+').replace(/_/gu, '/');\n    // Add padding if needed\n    const padded = base64.padEnd(base64.length + ((4 - (base64.length % 4)) % 4), '=');\n    // Decode and parse the JSON\n    const decoded = JSON.parse(atob(padded));\n    return decoded;\n}\n//# sourceMappingURL=ReownAuthentication.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL3NyYy9mZWF0dXJlcy9yZW93bi1hdXRoZW50aWNhdGlvbi9SZW93bkF1dGhlbnRpY2F0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQzZGO0FBQ2xCO0FBQ1I7QUFDb0I7QUFDaEI7QUFDRztBQUNPO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNFQUFvQjtBQUNwQztBQUNBO0FBQ0EsZ0JBQWdCLHNFQUFvQjtBQUNwQztBQUNBLDZCQUE2QiwwRkFBNEI7QUFDekQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsbUZBQW9CO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsVUFBVTtBQUM5QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsNEJBQTRCLGdCQUFnQjtBQUM1QztBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIsU0FBUztBQUNUO0FBQ0EsNkNBQTZDLE1BQU07QUFDbkQ7QUFDQTtBQUNBLHNCQUFzQixNQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixNQUFNO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0Esb0JBQW9CLG1DQUFtQztBQUN2RCxnQkFBZ0Isb0JBQW9CO0FBQ3BDLCtCQUErQiwrREFBYSxhQUFhLFdBQVcsWUFBWTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxnREFBZ0Q7QUFDM0c7QUFDQTtBQUNBLDZEQUE2RCwrQ0FBK0M7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsSUFBSTtBQUNyQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtFQUFnQjtBQUMvQjtBQUNBO0FBQ0EsUUFBUSxrRUFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrRUFBZ0I7QUFDeEIsUUFBUSxrRUFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNEZBQXVCO0FBQ3RDO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCLEVBQUUsZ0ZBQWlCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdFQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBLDBCQUEwQiwrREFBYTtBQUN2QyxnQkFBZ0IsNEVBQWUsMEJBQTBCLE9BQU87QUFDaEUsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtY29udHJvbGxlcnMvZGlzdC9lc20vc3JjL2ZlYXR1cmVzL3Jlb3duLWF1dGhlbnRpY2F0aW9uL1Jlb3duQXV0aGVudGljYXRpb24uanM/MWE3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvL1xuaW1wb3J0IHsgQ29uc3RhbnRzVXRpbCwgU2FmZUxvY2FsU3RvcmFnZSwgU2FmZUxvY2FsU3RvcmFnZUtleXMgfSBmcm9tICdAcmVvd24vYXBwa2l0LWNvbW1vbic7XG5pbXBvcnQgeyBBY2NvdW50Q29udHJvbGxlciB9IGZyb20gJy4uLy4uL2NvbnRyb2xsZXJzL0FjY291bnRDb250cm9sbGVyLmpzJztcbmltcG9ydCB7IEFwaUNvbnRyb2xsZXIgfSBmcm9tICcuLi8uLi9jb250cm9sbGVycy9BcGlDb250cm9sbGVyLmpzJztcbmltcG9ydCB7IEJsb2NrY2hhaW5BcGlDb250cm9sbGVyIH0gZnJvbSAnLi4vLi4vY29udHJvbGxlcnMvQmxvY2tjaGFpbkFwaUNvbnRyb2xsZXIuanMnO1xuaW1wb3J0IHsgQ2hhaW5Db250cm9sbGVyIH0gZnJvbSAnLi4vLi4vY29udHJvbGxlcnMvQ2hhaW5Db250cm9sbGVyLmpzJztcbmltcG9ydCB7IGdldEFjdGl2ZUNhaXBOZXR3b3JrIH0gZnJvbSAnLi4vLi4vdXRpbHMvQ2hhaW5Db250cm9sbGVyVXRpbC5qcyc7XG5pbXBvcnQgeyBSZW93bkF1dGhlbnRpY2F0aW9uTWVzc2VuZ2VyIH0gZnJvbSAnLi9SZW93bkF1dGhlbnRpY2F0aW9uTWVzc2VuZ2VyLmpzJztcbi8qKlxuICogVGhpcyBpcyB0aGUgY29uZmlndXJhdGlvbiBmb3IgdXNpbmcgU0lXWCB3aXRoIFJlb3duIEF1dGhlbnRpY2F0aW9uIHNlcnZpY2UuXG4gKiBJdCBhbGxvd3MgeW91IHRvIGF1dGhlbnRpY2F0ZSBhbmQgY2FwdHVyZSB1c2VyIHNlc3Npb25zIHRocm91Z2ggdGhlIENsb3VkIERhc2hib2FyZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlb3duQXV0aGVudGljYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcyA9IHt9KSB7XG4gICAgICAgIHRoaXMub3RwVXVpZCA9IG51bGw7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0ge1xuICAgICAgICAgICAgc2Vzc2lvbkNoYW5nZWQ6IFtdXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubG9jYWxBdXRoU3RvcmFnZUtleSA9XG4gICAgICAgICAgICBwYXJhbXMubG9jYWxBdXRoU3RvcmFnZUtleSB8fFxuICAgICAgICAgICAgICAgIFNhZmVMb2NhbFN0b3JhZ2VLZXlzLlNJV1hfQVVUSF9UT0tFTjtcbiAgICAgICAgdGhpcy5sb2NhbE5vbmNlU3RvcmFnZUtleSA9XG4gICAgICAgICAgICBwYXJhbXMubG9jYWxOb25jZVN0b3JhZ2VLZXkgfHxcbiAgICAgICAgICAgICAgICBTYWZlTG9jYWxTdG9yYWdlS2V5cy5TSVdYX05PTkNFX1RPS0VOO1xuICAgICAgICB0aGlzLnJlcXVpcmVkID0gcGFyYW1zLnJlcXVpcmVkID8/IHRydWU7XG4gICAgICAgIHRoaXMubWVzc2VuZ2VyID0gbmV3IFJlb3duQXV0aGVudGljYXRpb25NZXNzZW5nZXIoe1xuICAgICAgICAgICAgZ2V0Tm9uY2U6IHRoaXMuZ2V0Tm9uY2UuYmluZCh0aGlzKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlTWVzc2FnZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzZW5nZXIuY3JlYXRlTWVzc2FnZShpbnB1dCk7XG4gICAgfVxuICAgIGFzeW5jIGFkZFNlc3Npb24oc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGtleTogJ2F1dGhlbnRpY2F0ZScsXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgZGF0YTogc2Vzc2lvbi5kYXRhLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHNlc3Npb24ubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHNlc3Npb24uc2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmdldENsaWVudElkKCksXG4gICAgICAgICAgICAgICAgd2FsbGV0SW5mbzogdGhpcy5nZXRXYWxsZXRJbmZvKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoZWFkZXJzOiBbJ25vbmNlJywgJ290cCddXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldFN0b3JhZ2VUb2tlbihyZXNwb25zZS50b2tlbiwgdGhpcy5sb2NhbEF1dGhTdG9yYWdlS2V5KTtcbiAgICAgICAgdGhpcy5lbWl0KCdzZXNzaW9uQ2hhbmdlZCcsIHNlc3Npb24pO1xuICAgICAgICB0aGlzLnNldEFwcEtpdEFjY291bnRVc2VyKGp3dERlY29kZShyZXNwb25zZS50b2tlbikpO1xuICAgICAgICB0aGlzLm90cFV1aWQgPSBudWxsO1xuICAgIH1cbiAgICBhc3luYyBnZXRTZXNzaW9ucyhjaGFpbklkLCBhZGRyZXNzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2V0U3RvcmFnZVRva2VuKHRoaXMubG9jYWxBdXRoU3RvcmFnZUtleSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGtleTogJ21lJyxcbiAgICAgICAgICAgICAgICBxdWVyeToge30sXG4gICAgICAgICAgICAgICAgaGVhZGVyczogWydhdXRoJ11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXNTYW1lQWRkcmVzcyA9IGFjY291bnQuYWRkcmVzcy50b0xvd2VyQ2FzZSgpID09PSBhZGRyZXNzLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCBpc1NhbWVOZXR3b3JrID0gYWNjb3VudC5jYWlwMk5ldHdvcmsgPT09IGNoYWluSWQ7XG4gICAgICAgICAgICBpZiAoIWlzU2FtZUFkZHJlc3MgfHwgIWlzU2FtZU5ldHdvcmspIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEFkZHJlc3M6IGFjY291bnQuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogYWNjb3VudC5jYWlwMk5ldHdvcmtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICcnLFxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogJydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3Nlc3Npb25DaGFuZ2VkJywgc2Vzc2lvbik7XG4gICAgICAgICAgICB0aGlzLnNldEFwcEtpdEFjY291bnRVc2VyKGFjY291bnQpO1xuICAgICAgICAgICAgcmV0dXJuIFtzZXNzaW9uXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmV2b2tlU2Vzc2lvbihfY2hhaW5JZCwgX2FkZHJlc3MpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmNsZWFyU3RvcmFnZVRva2VucygpKTtcbiAgICB9XG4gICAgYXN5bmMgc2V0U2Vzc2lvbnMoc2Vzc2lvbnMpIHtcbiAgICAgICAgaWYgKHNlc3Npb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclN0b3JhZ2VUb2tlbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSAoc2Vzc2lvbnMuZmluZChzID0+IHMuZGF0YS5jaGFpbklkID09PSBnZXRBY3RpdmVDYWlwTmV0d29yaygpPy5jYWlwTmV0d29ya0lkKSB8fCBzZXNzaW9uc1swXSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFNlc3Npb24oc2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UmVxdWlyZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVpcmVkO1xuICAgIH1cbiAgICBhc3luYyBnZXRTZXNzaW9uQWNjb3VudCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdldFN0b3JhZ2VUb2tlbih0aGlzLmxvY2FsQXV0aFN0b3JhZ2VLZXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhdXRoZW50aWNhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAga2V5OiAnbWUnLFxuICAgICAgICAgICAgYm9keTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlQXBwS2l0QWNjb3VudDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhlYWRlcnM6IFsnYXV0aCddXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZXRTZXNzaW9uQWNjb3VudE1ldGFkYXRhKG1ldGFkYXRhID0gbnVsbCkge1xuICAgICAgICBpZiAoIXRoaXMuZ2V0U3RvcmFnZVRva2VuKHRoaXMubG9jYWxBdXRoU3RvcmFnZUtleSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGF1dGhlbnRpY2F0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICBrZXk6ICdhY2NvdW50LW1ldGFkYXRhJyxcbiAgICAgICAgICAgIGJvZHk6IHsgbWV0YWRhdGEgfSxcbiAgICAgICAgICAgIGhlYWRlcnM6IFsnYXV0aCddXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbihldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdID0gdGhpcy5saXN0ZW5lcnNbZXZlbnRdLmZpbHRlcihjYiA9PiBjYiAhPT0gY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZW1vdmVBbGxMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycyk7XG4gICAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XSA9IFtdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcmVxdWVzdEVtYWlsT3RwKHsgZW1haWwsIGFjY291bnQgfSkge1xuICAgICAgICBjb25zdCBvdHAgPSBhd2FpdCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBrZXk6ICdvdHAnLFxuICAgICAgICAgICAgYm9keTogeyBlbWFpbCwgYWNjb3VudCB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm90cFV1aWQgPSBvdHAudXVpZDtcbiAgICAgICAgdGhpcy5tZXNzZW5nZXIucmVzb3VyY2VzID0gW2BlbWFpbDoke2VtYWlsfWBdO1xuICAgICAgICByZXR1cm4gb3RwO1xuICAgIH1cbiAgICBjb25maXJtRW1haWxPdHAoeyBjb2RlIH0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAga2V5OiAnb3RwJyxcbiAgICAgICAgICAgIGJvZHk6IHsgY29kZSB9LFxuICAgICAgICAgICAgaGVhZGVyczogWydvdHAnXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcmVxdWVzdCh7IG1ldGhvZCwga2V5LCBxdWVyeSwgYm9keSwgaGVhZGVycyB9KSB7XG4gICAgICAgIGNvbnN0IHsgcHJvamVjdElkLCBzdCwgc3YgfSA9IHRoaXMuZ2V0U0RLUHJvcGVydGllcygpO1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke0NvbnN0YW50c1V0aWwuVzNNX0FQSV9VUkx9L2F1dGgvdjEvJHtTdHJpbmcoa2V5KX1gKTtcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3Byb2plY3RJZCcsIHByb2plY3RJZCk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzdCcsIHN0KTtcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3N2Jywgc3YpO1xuICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5mb3JFYWNoKChbcXVlcnlLZXksIHF1ZXJ5VmFsdWVdKSA9PiB1cmwuc2VhcmNoUGFyYW1zLnNldChxdWVyeUtleSwgU3RyaW5nKHF1ZXJ5VmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgIGJvZHk6IGJvZHkgPyBKU09OLnN0cmluZ2lmeShib2R5KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGhlYWRlcnM6IEFycmF5LmlzQXJyYXkoaGVhZGVycylcbiAgICAgICAgICAgICAgICA/IGhlYWRlcnMucmVkdWNlKChhY2MsIGhlYWRlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm9uY2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY1sneC1ub25jZS1qd3QnXSA9IGBCZWFyZXIgJHt0aGlzLmdldFN0b3JhZ2VUb2tlbih0aGlzLmxvY2FsTm9uY2VTdG9yYWdlS2V5KX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXV0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dGhpcy5nZXRTdG9yYWdlVG9rZW4odGhpcy5sb2NhbEF1dGhTdG9yYWdlS2V5KX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3RwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vdHBVdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY1sneC1vdHAnXSA9IHRoaXMub3RwVXVpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgICAgfSwge30pXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihhd2FpdCByZXNwb25zZS50ZXh0KCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk/LmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGdldFN0b3JhZ2VUb2tlbihrZXkpIHtcbiAgICAgICAgcmV0dXJuIFNhZmVMb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgIH1cbiAgICBzZXRTdG9yYWdlVG9rZW4odG9rZW4sIGtleSkge1xuICAgICAgICBTYWZlTG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB0b2tlbik7XG4gICAgfVxuICAgIGNsZWFyU3RvcmFnZVRva2VucygpIHtcbiAgICAgICAgdGhpcy5vdHBVdWlkID0gbnVsbDtcbiAgICAgICAgU2FmZUxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMubG9jYWxBdXRoU3RvcmFnZUtleSk7XG4gICAgICAgIFNhZmVMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmxvY2FsTm9uY2VTdG9yYWdlS2V5KTtcbiAgICAgICAgdGhpcy5lbWl0KCdzZXNzaW9uQ2hhbmdlZCcsIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGFzeW5jIGdldE5vbmNlKCkge1xuICAgICAgICBjb25zdCB7IG5vbmNlLCB0b2tlbiB9ID0gYXdhaXQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBrZXk6ICdub25jZSdcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0U3RvcmFnZVRva2VuKHRva2VuLCB0aGlzLmxvY2FsTm9uY2VTdG9yYWdlS2V5KTtcbiAgICAgICAgcmV0dXJuIG5vbmNlO1xuICAgIH1cbiAgICBnZXRDbGllbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIEJsb2NrY2hhaW5BcGlDb250cm9sbGVyLnN0YXRlLmNsaWVudElkO1xuICAgIH1cbiAgICBnZXRXYWxsZXRJbmZvKCkge1xuICAgICAgICBjb25zdCB7IGNvbm5lY3RlZFdhbGxldEluZm8gfSA9IEFjY291bnRDb250cm9sbGVyLnN0YXRlO1xuICAgICAgICBpZiAoIWNvbm5lY3RlZFdhbGxldEluZm8pIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdzb2NpYWwnIGluIGNvbm5lY3RlZFdhbGxldEluZm8pIHtcbiAgICAgICAgICAgIGNvbnN0IHNvY2lhbCA9IGNvbm5lY3RlZFdhbGxldEluZm9bJ3NvY2lhbCddO1xuICAgICAgICAgICAgY29uc3QgaWRlbnRpZmllciA9IGNvbm5lY3RlZFdhbGxldEluZm9bJ2lkZW50aWZpZXInXTtcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdzb2NpYWwnLCBzb2NpYWwsIGlkZW50aWZpZXIgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG5hbWUsIGljb24gfSA9IGNvbm5lY3RlZFdhbGxldEluZm87XG4gICAgICAgIGxldCB0eXBlID0gJ3Vua25vd24nO1xuICAgICAgICBzd2l0Y2ggKGNvbm5lY3RlZFdhbGxldEluZm9bJ3R5cGUnXSkge1xuICAgICAgICAgICAgY2FzZSAnRVhURVJOQUwnOlxuICAgICAgICAgICAgY2FzZSAnSU5KRUNURUQnOlxuICAgICAgICAgICAgY2FzZSAnQU5OT1VOQ0VEJzpcbiAgICAgICAgICAgICAgICB0eXBlID0gJ2V4dGVuc2lvbic7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdXQUxMRVRfQ09OTkVDVCc6XG4gICAgICAgICAgICAgICAgdHlwZSA9ICd3YWxsZXRjb25uZWN0JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdHlwZSA9ICd1bmtub3duJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBpY29uXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFNES1Byb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiBBcGlDb250cm9sbGVyLl9nZXRTZGtQcm9wZXJ0aWVzKCk7XG4gICAgfVxuICAgIGVtaXQoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoZGF0YSkpO1xuICAgIH1cbiAgICBzZXRBcHBLaXRBY2NvdW50VXNlcihzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHsgZW1haWwgfSA9IHNlc3Npb247XG4gICAgICAgIGlmIChlbWFpbCkge1xuICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhDb25zdGFudHNVdGlsLkNIQUlOKS5mb3JFYWNoKGNoYWluTmFtZXNwYWNlID0+IHtcbiAgICAgICAgICAgICAgICBDaGFpbkNvbnRyb2xsZXIuc2V0QWNjb3VudFByb3AoJ3VzZXInLCB7IGVtYWlsIH0sIGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBEZWNvZGVzIGEgSldUIHRva2VuIGFuZCByZXR1cm5zIGl0cyBwYXlsb2FkXG4gKiBAcGFyYW0gdG9rZW4gLSBUaGUgSldUIHRva2VuIHRvIGRlY29kZVxuICogQHJldHVybnMgVGhlIGRlY29kZWQgcGF5bG9hZCBvciBudWxsIGlmIGludmFsaWRcbiAqL1xuZnVuY3Rpb24gand0RGVjb2RlKHRva2VuKSB7XG4gICAgLy8gU3BsaXQgdGhlIHRva2VuIGludG8gcGFydHNcbiAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIHRva2VuIGhhcyB0aGUgY29ycmVjdCBmb3JtYXQgKGhlYWRlci5wYXlsb2FkLnNpZ25hdHVyZSlcbiAgICBpZiAocGFydHMubGVuZ3RoICE9PSAzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0b2tlbicpO1xuICAgIH1cbiAgICAvLyBEZWNvZGUgdGhlIHBheWxvYWQgKHNlY29uZCBwYXJ0KVxuICAgIGNvbnN0IHBheWxvYWQgPSBwYXJ0c1sxXTtcbiAgICBpZiAodHlwZW9mIHBheWxvYWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0b2tlbicpO1xuICAgIH1cbiAgICAvLyBDb252ZXJ0IGJhc2U2NHVybCB0byBiYXNlNjRcbiAgICBjb25zdCBiYXNlNjQgPSBwYXlsb2FkLnJlcGxhY2UoLy0vZ3UsICcrJykucmVwbGFjZSgvXy9ndSwgJy8nKTtcbiAgICAvLyBBZGQgcGFkZGluZyBpZiBuZWVkZWRcbiAgICBjb25zdCBwYWRkZWQgPSBiYXNlNjQucGFkRW5kKGJhc2U2NC5sZW5ndGggKyAoKDQgLSAoYmFzZTY0Lmxlbmd0aCAlIDQpKSAlIDQpLCAnPScpO1xuICAgIC8vIERlY29kZSBhbmQgcGFyc2UgdGhlIEpTT05cbiAgICBjb25zdCBkZWNvZGVkID0gSlNPTi5wYXJzZShhdG9iKHBhZGRlZCkpO1xuICAgIHJldHVybiBkZWNvZGVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVvd25BdXRoZW50aWNhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/ReownAuthentication.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/ReownAuthenticationMessenger.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/ReownAuthenticationMessenger.js ***!
  \***************************************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReownAuthenticationMessenger: function() { return /* binding */ ReownAuthenticationMessenger; }\n/* harmony export */ });\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @reown/appkit-common */ \"(app-pages-browser)/./node_modules/@reown/appkit-common/dist/esm/src/utils/NetworkUtil.js\");\n/* harmony import */ var _controllers_ChainController_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../controllers/ChainController.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ChainController.js\");\n\n\nclass ReownAuthenticationMessenger {\n    constructor(params) {\n        this.getNonce = params.getNonce;\n    }\n    async createMessage(input) {\n        const params = {\n            accountAddress: input.accountAddress,\n            chainId: input.chainId,\n            version: '1',\n            domain: typeof document === 'undefined' ? 'Unknown Domain' : document.location.host,\n            uri: typeof document === 'undefined' ? 'Unknown URI' : document.location.href,\n            resources: this.resources,\n            nonce: await this.getNonce(input),\n            issuedAt: this.stringifyDate(new Date()),\n            statement: undefined,\n            expirationTime: undefined,\n            notBefore: undefined\n        };\n        const methods = {\n            toString: () => this.stringify(params)\n        };\n        return Object.assign(params, methods);\n    }\n    stringify(params) {\n        const networkName = this.getNetworkName(params.chainId);\n        return [\n            `${params.domain} wants you to sign in with your ${networkName} account:`,\n            params.accountAddress,\n            params.statement ? `\\n${params.statement}\\n` : '',\n            `URI: ${params.uri}`,\n            `Version: ${params.version}`,\n            `Chain ID: ${params.chainId}`,\n            `Nonce: ${params.nonce}`,\n            params.issuedAt && `Issued At: ${params.issuedAt}`,\n            params.expirationTime && `Expiration Time: ${params.expirationTime}`,\n            params.notBefore && `Not Before: ${params.notBefore}`,\n            params.requestId && `Request ID: ${params.requestId}`,\n            params.resources?.length &&\n                params.resources.reduce((acc, resource) => `${acc}\\n- ${resource}`, 'Resources:')\n        ]\n            .filter(line => typeof line === 'string')\n            .join('\\n')\n            .trim();\n    }\n    getNetworkName(chainId) {\n        const requestedNetworks = _controllers_ChainController_js__WEBPACK_IMPORTED_MODULE_0__.ChainController.getAllRequestedCaipNetworks();\n        return _reown_appkit_common__WEBPACK_IMPORTED_MODULE_1__.NetworkUtil.getNetworkNameByCaipNetworkId(requestedNetworks, chainId);\n    }\n    stringifyDate(date) {\n        return date.toISOString();\n    }\n}\n//# sourceMappingURL=ReownAuthenticationMessenger.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL3NyYy9mZWF0dXJlcy9yZW93bi1hdXRoZW50aWNhdGlvbi9SZW93bkF1dGhlbnRpY2F0aW9uTWVzc2VuZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFtRDtBQUNvQjtBQUNoRTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxlQUFlLGlDQUFpQyxhQUFhO0FBQzVFO0FBQ0Esb0NBQW9DLGlCQUFpQjtBQUNyRCxvQkFBb0IsV0FBVztBQUMvQix3QkFBd0IsZUFBZTtBQUN2Qyx5QkFBeUIsZUFBZTtBQUN4QyxzQkFBc0IsYUFBYTtBQUNuQyw2Q0FBNkMsZ0JBQWdCO0FBQzdELHlEQUF5RCxzQkFBc0I7QUFDL0UsK0NBQStDLGlCQUFpQjtBQUNoRSwrQ0FBK0MsaUJBQWlCO0FBQ2hFO0FBQ0EsOERBQThELElBQUksTUFBTSxTQUFTO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw0RUFBZTtBQUNqRCxlQUFlLDZEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1jb250cm9sbGVycy9kaXN0L2VzbS9zcmMvZmVhdHVyZXMvcmVvd24tYXV0aGVudGljYXRpb24vUmVvd25BdXRoZW50aWNhdGlvbk1lc3Nlbmdlci5qcz9jNjA2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5ldHdvcmtVdGlsIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb21tb24nO1xuaW1wb3J0IHsgQ2hhaW5Db250cm9sbGVyIH0gZnJvbSAnLi4vLi4vY29udHJvbGxlcnMvQ2hhaW5Db250cm9sbGVyLmpzJztcbmV4cG9ydCBjbGFzcyBSZW93bkF1dGhlbnRpY2F0aW9uTWVzc2VuZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5nZXROb25jZSA9IHBhcmFtcy5nZXROb25jZTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlTWVzc2FnZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICBhY2NvdW50QWRkcmVzczogaW5wdXQuYWNjb3VudEFkZHJlc3MsXG4gICAgICAgICAgICBjaGFpbklkOiBpbnB1dC5jaGFpbklkLFxuICAgICAgICAgICAgdmVyc2lvbjogJzEnLFxuICAgICAgICAgICAgZG9tYWluOiB0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnID8gJ1Vua25vd24gRG9tYWluJyA6IGRvY3VtZW50LmxvY2F0aW9uLmhvc3QsXG4gICAgICAgICAgICB1cmk6IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgPyAnVW5rbm93biBVUkknIDogZG9jdW1lbnQubG9jYXRpb24uaHJlZixcbiAgICAgICAgICAgIHJlc291cmNlczogdGhpcy5yZXNvdXJjZXMsXG4gICAgICAgICAgICBub25jZTogYXdhaXQgdGhpcy5nZXROb25jZShpbnB1dCksXG4gICAgICAgICAgICBpc3N1ZWRBdDogdGhpcy5zdHJpbmdpZnlEYXRlKG5ldyBEYXRlKCkpLFxuICAgICAgICAgICAgc3RhdGVtZW50OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBleHBpcmF0aW9uVGltZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbm90QmVmb3JlOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbWV0aG9kcyA9IHtcbiAgICAgICAgICAgIHRvU3RyaW5nOiAoKSA9PiB0aGlzLnN0cmluZ2lmeShwYXJhbXMpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHBhcmFtcywgbWV0aG9kcyk7XG4gICAgfVxuICAgIHN0cmluZ2lmeShwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgbmV0d29ya05hbWUgPSB0aGlzLmdldE5ldHdvcmtOYW1lKHBhcmFtcy5jaGFpbklkKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGAke3BhcmFtcy5kb21haW59IHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciAke25ldHdvcmtOYW1lfSBhY2NvdW50OmAsXG4gICAgICAgICAgICBwYXJhbXMuYWNjb3VudEFkZHJlc3MsXG4gICAgICAgICAgICBwYXJhbXMuc3RhdGVtZW50ID8gYFxcbiR7cGFyYW1zLnN0YXRlbWVudH1cXG5gIDogJycsXG4gICAgICAgICAgICBgVVJJOiAke3BhcmFtcy51cml9YCxcbiAgICAgICAgICAgIGBWZXJzaW9uOiAke3BhcmFtcy52ZXJzaW9ufWAsXG4gICAgICAgICAgICBgQ2hhaW4gSUQ6ICR7cGFyYW1zLmNoYWluSWR9YCxcbiAgICAgICAgICAgIGBOb25jZTogJHtwYXJhbXMubm9uY2V9YCxcbiAgICAgICAgICAgIHBhcmFtcy5pc3N1ZWRBdCAmJiBgSXNzdWVkIEF0OiAke3BhcmFtcy5pc3N1ZWRBdH1gLFxuICAgICAgICAgICAgcGFyYW1zLmV4cGlyYXRpb25UaW1lICYmIGBFeHBpcmF0aW9uIFRpbWU6ICR7cGFyYW1zLmV4cGlyYXRpb25UaW1lfWAsXG4gICAgICAgICAgICBwYXJhbXMubm90QmVmb3JlICYmIGBOb3QgQmVmb3JlOiAke3BhcmFtcy5ub3RCZWZvcmV9YCxcbiAgICAgICAgICAgIHBhcmFtcy5yZXF1ZXN0SWQgJiYgYFJlcXVlc3QgSUQ6ICR7cGFyYW1zLnJlcXVlc3RJZH1gLFxuICAgICAgICAgICAgcGFyYW1zLnJlc291cmNlcz8ubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgcGFyYW1zLnJlc291cmNlcy5yZWR1Y2UoKGFjYywgcmVzb3VyY2UpID0+IGAke2FjY31cXG4tICR7cmVzb3VyY2V9YCwgJ1Jlc291cmNlczonKVxuICAgICAgICBdXG4gICAgICAgICAgICAuZmlsdGVyKGxpbmUgPT4gdHlwZW9mIGxpbmUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgLmpvaW4oJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpO1xuICAgIH1cbiAgICBnZXROZXR3b3JrTmFtZShjaGFpbklkKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RlZE5ldHdvcmtzID0gQ2hhaW5Db250cm9sbGVyLmdldEFsbFJlcXVlc3RlZENhaXBOZXR3b3JrcygpO1xuICAgICAgICByZXR1cm4gTmV0d29ya1V0aWwuZ2V0TmV0d29ya05hbWVCeUNhaXBOZXR3b3JrSWQocmVxdWVzdGVkTmV0d29ya3MsIGNoYWluSWQpO1xuICAgIH1cbiAgICBzdHJpbmdpZnlEYXRlKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZW93bkF1dGhlbnRpY2F0aW9uTWVzc2VuZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/ReownAuthenticationMessenger.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/index.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/index.js ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReownAuthentication: function() { return /* reexport safe */ _ReownAuthentication_js__WEBPACK_IMPORTED_MODULE_0__.ReownAuthentication; },\n/* harmony export */   ReownAuthenticationMessenger: function() { return /* reexport safe */ _ReownAuthenticationMessenger_js__WEBPACK_IMPORTED_MODULE_1__.ReownAuthenticationMessenger; }\n/* harmony export */ });\n/* harmony import */ var _ReownAuthentication_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ReownAuthentication.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/ReownAuthentication.js\");\n/* harmony import */ var _ReownAuthenticationMessenger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ReownAuthenticationMessenger.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/ReownAuthenticationMessenger.js\");\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL3NyYy9mZWF0dXJlcy9yZW93bi1hdXRoZW50aWNhdGlvbi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXlDO0FBQ1M7QUFDbEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtY29udHJvbGxlcnMvZGlzdC9lc20vc3JjL2ZlYXR1cmVzL3Jlb3duLWF1dGhlbnRpY2F0aW9uL2luZGV4LmpzPzYyZDYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9SZW93bkF1dGhlbnRpY2F0aW9uLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vUmVvd25BdXRoZW50aWNhdGlvbk1lc3Nlbmdlci5qcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/reown-authentication/index.js\n"));

/***/ })

}]);